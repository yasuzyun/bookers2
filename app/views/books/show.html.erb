<div class="container">
  <div class="row">
    <div class="col-md-3">
      <h2>User info</h2>
         <%= image_tag @user.get_profile_image(100,100) %>
      <table class="table">
        <tbody>
          <tr>
            <th>name</th>
            <th><%= @book.user.name %></th>
          </tr>
          <tr>
            <th>introduction</th>
            <th><%= @book.user.introduction %></th>
          </tr>
          <tr>
            <th>follows</th>
            <th><%= link_to @user.followings.count , user_followings_path(@user.id) %></th>
          </tr>
          <tr>
            <th>followers</th>
            <th><%= link_to @user.followers.count , user_followers_path(@user.id) %></th>
          </tr>
        </tbody>
      </table>
        <div class="row">

            <%= link_to  edit_user_path(@book.user.id), class: "btn btn-outline-secondary btn-block" do  %>
              <i class= "fas fa-user-cog"></i>
            <% end %>
        </div>
        <h2 class="mt-3">New book</h2>
          <%= form_with model:@book_new, local:true do |f| %>
            <div class="form-group">
              <label for ="book_title">Title</label>
                <%= f.text_field :title %>
            </div>
            <div class="form-group">
              <label for ="book_opinion">Opinion</label>
                <%= f.text_area :body %>
            </div>
            <div class="form-group">
               <%= f.submit 'Create Book' , class: "btn btn-success"%>
            </div>
          <% end %>
    </div>
    <div class="col-md-8 offset-md-1">
      <h2>Book detail</h2>
        <table class="table">
          <tbody>
            <tr>
              <td>
                <%# undefined method `id' for nil:NilClass%>
                <%= link_to user_path(@book.user.id) do %>
                 <%#undefined method `get_profile_image' for nil:NilClass %>
                 <%= image_tag @book.user.get_profile_image(100,100) %><br>


                  <%#undefined method `name' for nil:NilClass %>
                 <%= @book.user.name %>
                <% end %>
              </td>
                <%#文字にlinkをつける方法
                <%= link_to list.title, list_path(list.id) %>
              <td>
                <%= link_to @book.title, book_path(@book.id) %>
              </td>
              <td>
                <%= @book.body %>
              </td>

              <td>
                <div class ="favorite_buttons_<%= @book.id %>">
                 <%= render "favorites/favorites", book: @book %>
                </div>
              </td>

            </tr>
          </tbody>
        </table>

        <table>
           <% @book.book_comments.each do |book_comment| %>
          <tr>
            <td>
               <%= image_tag book_comment.user.get_profile_image %>
               <%= book_comment.user.name %>
            </td>
            <td>
              <%= book_comment.comment %>
            </td>
            <td>

              <%= link_to "Destroy", book_book_comments_path(book_comment.id), method: :delete , class: "btn btn-danger" %>
            </td>
          </tr>
          <% end %>
        </table>

        <div class="comments_area">
          <%= render "book_comments/book_comments", book: @book %>
        </div>
        <%= render "book_comments/book_comments_new", book: @book, book_comment: @book_comments %>

    </div>
</div>